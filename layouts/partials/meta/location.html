{{ $show_icon := .Scratch.Get "show_icon" | default true }}
{{ $show_address := .Scratch.Get "show_address" | default true }}
<div class="meta location">
    {{ if $show_icon }}<i class="ic-location_on"></i>{{ end }}
    {{ with .Params.location }}
        {{ with $loc := index $.Site.Data.locations . }}
            {{ with $loc.url }}
            <a href="{{- $loc.url -}}" data-id="name" rel="external">{{- $loc.name -}}</a>
            {{ else }}
            <span data-id="name">{{- $loc.name -}}</span>
            {{ end }}
            {{ if $show_address }}
                {{ with .address }}
                <span>, </span><address>{{- . | safeHTML -}}</address>
                {{ end }}
            {{ end }}
        {{ else }}
        <span data-id="name">{{- . | markdownify -}}</span>
        {{ end }}
    {{ else }}
    <span>TBA</span>
    {{ end }}
</div>

