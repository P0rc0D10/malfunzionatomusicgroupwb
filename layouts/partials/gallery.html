<!--<style>
    ul.gallery2 {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        grid-auto-rows: 400px 200px;
        gap: 4px;
        /*
        row-gap: 1vh;
        column-gap: 1vw;
        */
        padding: 0 0 1rem 0;
        margin: 0;
        list-style-type: none;
    }
    /*
    ul.gallery2 li:nth-child(1) {

        grid-row: span 2;
    }
    ul.gallery2 li:nth-child(4) {
        /*grid-row: span 3
    }
    */
    ul.gallery2 li {
        min-width: 0;
    }
    ul.gallery2 img {
        display: block;
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
</style>

-->

{{ $page := . }}
<div class="gallery2">
    <ul>
        {{ range $res := .Resources.ByType "image" }}
        {{ if hasPrefix $res.Name "cover" }}<!-- hide cover images -->{{ else }}
        <li>
            <figure>
                {{ if lt $res.Width 420 }}
                <img src="{{ $res.RelPermalink }}" width="{{ $res.Width }}"
                height="{{ $res.Height }}" alt="{{ .Title }}">
                {{ else }}
                {{ $url_orig := $res.RelPermalink }}
                {{ $img := $res.Resize "420x" }}
                <img src="{{ $img.RelPermalink }}" width="{{ $img.Width }}"
                height="{{ $img.Height }}" alt="{{ .Title }}">
                {{ end }}
                <figcaption>
                    {{ with $res.Exif }}
                        {{ with .Tags }}
                            {{ with .DateTimeOriginal }}
                                {{ if hasPrefix . "0000:00:00" }}
                                {{ else }}
                                    {{ (time .).Format "15:04" }}
                                {{ end }}
                            {{ end }}
                        {{ end }}
                    {{ end }}
                </figcaption>
            </figure>
        </li>
        {{ end  }}
        {{ end }}
    </ul>
    {{ with .Params.photos }}
    <div class="photographer">
        <i class="ic-copyright"></i>
        <span>Photos by</span>
        <span>{{- . | safeHTML -}}</span>
    </div>
    {{ end }}
</div>
