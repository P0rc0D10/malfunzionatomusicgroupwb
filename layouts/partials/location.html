{{ $show_address := .Scratch.Get "show_address" | default true }}
{{ $show_url := .Scratch.Get "show_url" | default false }}
{{ $show_icon := .Scratch.Get "show_icon" | default true }}
<div class="location">
    {{ with .Params.location }}
        {{ with $loc := index $.Site.Data.locations . }}
            {{ if $show_icon }}
            <i class="ic-location_on"></i>
            {{ end }}
            {{ with .url }}
                {{ if $show_url }}
                <a href="{{ . }}" rel="external">
                    <!--<i class="ic-link"></i>-->
                    <span>{{- $loc.name -}}</span>
                    <span>{{ . }}</span>
                </a>
                {{ else }}
                <a href="{{ . }}" rel="external">
                    <!--<i class="ic-link"></i>-->
                    <span>{{- $loc.name -}}</span>
                </a>
                {{ end }}
            {{ else }}
                <span>{{- $loc.name -}}</span>
            {{ end }}
            {{ if $show_address }}
                {{ with .address }}
                    <address>{{- . | safeHTML -}}</address>
                {{ end }}
            {{ end }}
        {{ else }}
        {{ if $show_icon }}
        <i class="ic-location_on"></i>
        {{ end }}
        <span>{{ . | markdownify }}</span>
        {{ end }}
    {{ end }}
</div>
