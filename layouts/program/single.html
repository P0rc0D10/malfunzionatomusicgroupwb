{{ define "schema" }}
{{ partial "schema/event" . }}
{{ end }}

{{ define "main" }}
{{ $id := .File.ContentBaseName }}
<article class="event">
    <header>
        <h2 class="title">{{- .Title -}}</h2>
        <time>{{ .Date.Format "2006/01/02" }}</time>
        {{ partial "location" . }}
    </header>
    
    {{ partial "artists" . }}

    <!--<ul class="artists">
    {{ range .Params.artists }}
        <li>
            {{ $artist := replace (.) " " "-" }}
            <a href="/artists/{{ $artist }}">{{ $artist }}</a>
        </li>
    {{ end }}
    </ul>-->
    
    {{ with .Content }}
    <div class="content">{{- . | safeHTML -}}</div>
    {{ end }}

    <div class="audiofiles">
        <ol class="nolist">
            {{ range .Resources.ByType "audio" }}
            <li>
                <i class="ic-audiotrack"></i>
                <a href="{{.RelPermalink}}">{{- .Name | safeHTML -}}</a>
            </li>
            {{ end }}
        </ol>
        {{ with .Params.recordings }}
        <ol class="nolist">
            {{ range . }}
            <li>
                <i class="ic-audiotrack"></i>
                <a href="{{.}}">{{- . | safeHTML -}}</a>
            </li>
            {{ end }}
        </ol>
        {{ end }}
    </div>

    {{ partial "gallery" . }}
    
        <!--{{ with .GitInfo }}
        <div>
            <span>MOD</span>
            <a href="{{ $.Site.Params.repository }}/commit/{{ .Hash }}">
                <time>{{ .AuthorDate.Format "2006/01/02"  }}</time>
            </a>
        </div>
        {{ end }}-->
    
    <div class="page-nav">
        {{ partial "nav_top_prev_next.html" . }}
        {{ partial "tags" . }}
    </div>

</article>
<script>
let btn;
function checkScrollHeight() {
    btn.style.display = (document.body.scrollHeight > window.innerHeight) ? "block":"none";
}
window.onload = e => {
    btn = document.body.querySelector('i.ic-arrow_upward');
    checkScrollHeight();
    window.addEventListener("resize", e => {
        checkScrollHeight();
    }, false);
}
</script>
{{ end }}

